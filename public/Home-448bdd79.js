import{u as j}from"./list-7257134e.js";import{g as H,o as K,a as x,b as V,n as J,u as D,r as w,w as X,c as W,s as U,d,e as q,f as B,h as k,V as $,i as ee,j as L,k as b,t as N,l as Y,m as G,p as Z}from"./index-ca7c97c2.js";import{u as te,V as ne,a as M}from"./settings-66a5e8d4.js";const oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAADICAYAAABS39xVAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADcklEQVR4nO3dMW4TQRhA4YmUK6SghTJFuINrUtBTcQ4UIc5BRU9B7zMQF7S0KXIIkAsiFHmzim3IPuX7Ckue8Uqunv4dr+TTN6++/xoAy3Kya/F0AETcBWu1ORsAT2l9cfvgvgkLyBAsYImu7r3/uH0RLCBjMlhz95IAh3rs2bkJC8iYDdaXry8HwDG9e/tzr+tMWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWEDGbLD2/YdWgGMzYQEZk8Fabc4GwJKYsIAMwQIyBAvImAzW+uJ2APxLjz0rN2EBGbPB+vbj9QA4psvz672uM2EBGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkCFYQIZgARmCBWQIFpAhWECGYAEZggVkCBaQIVhAhmABGYIFZAgWkDEbrMvz6wGwBCYsIGMyWKvN2QBYEhMWkCFYQIZgARmCBWRMBmt9cTuW5M+PAA99r+1nDt0HlsuEBWTMBuvzhxfjKb3/dLNz/e9paNfUdOg+sDwmLCBDsICMbLDmbuMO3QeWJxss4PnJBWvu0YND94HlygULeL7ugjV1pjP1WMH/5swJMGEBGdtgndxbuxoAC2TCAjIEC8gQLCDjN4IZQYNCW7zaAAAAAElFTkSuQmCC";function R(e){return H()?(K(e),!0):!1}function F(){const e=new Set,n=r=>{e.delete(r)};return{on:r=>{e.add(r);const a=()=>n(r);return R(a),{off:a}},off:n,trigger:r=>Promise.all(Array.from(e).map(a=>a(r)))}}function O(e){return typeof e=="function"?e():D(e)}const re=typeof window<"u",ae=()=>{};function ie(e,n=!0){x()?V(e):n?e():J(e)}function se(e){var n;const o=O(e);return(n=o==null?void 0:o.$el)!=null?n:o}const P=re?window:void 0;function le(...e){let n,o,t,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,t,r]=e,n=P):[n,o,t,r]=e,!n)return ae;Array.isArray(o)||(o=[o]),Array.isArray(t)||(t=[t]);const a=[],A=()=>{a.forEach(i=>i()),a.length=0},p=(i,u,l,s)=>(i.addEventListener(u,l,s),()=>i.removeEventListener(u,l,s)),g=X(()=>[se(n),O(r)],([i,u])=>{A(),i&&a.push(...o.flatMap(l=>t.map(s=>p(i,l,s,u))))},{immediate:!0,flush:"post"}),f=()=>{g(),A()};return R(f),f}function ue(){const e=w(!1);return x()&&V(()=>{e.value=!0}),e}function ce(e){const n=ue();return W(()=>(n.value,!!e()))}function Ae(e={}){const{window:n=P}=e,o=ce(()=>!!n&&"Notification"in n),t=w(null),r=async()=>{o.value&&"permission"in Notification&&Notification.permission!=="denied"&&await Notification.requestPermission()},{on:a,trigger:A}=F(),{on:p,trigger:g}=F(),{on:f,trigger:i}=F(),{on:u,trigger:l}=F(),s=async h=>{if(!o.value)return;await r();const I=Object.assign({},e,h);return t.value=new Notification(I.title||"",I),t.value.onclick=A,t.value.onshow=g,t.value.onerror=i,t.value.onclose=l,t.value},m=()=>{t.value&&t.value.close(),t.value=null};if(ie(async()=>{o.value&&await r()}),R(m),o.value&&n){const h=n.document;le(h,"visibilitychange",I=>{I.preventDefault(),h.visibilityState==="visible"&&m()})}return{isSupported:o,notification:t,show:s,close:m,onClick:a,onShow:p,onError:f,onClose:u}}const he={__name:"Home",setup(e){const n=j(),{items:o,currentItem:t,timeleft:r}=U(n),{countdown:a,setCurrentItem:A,setFinishItem:p}=n,g=te(),{selectedAlarmFile:f,notify:i}=U(g),u=W(()=>g.selectedBGFile),l=[{file:new URL(""+new URL("kangel01-8db95c51.gif",import.meta.url).href,self.location).href},{file:new URL(""+new URL("kangel02-ac7ac319.gif",import.meta.url).href,self.location).href},{file:new URL(""+new URL("kangel03-3840cbf1.gif",import.meta.url).href,self.location).href},{file:new URL(""+new URL("kangel04-9f282d4e.gif",import.meta.url).href,self.location).href},{file:new URL(""+new URL("ame01-3e9a573d.gif",import.meta.url).href,self.location).href},{file:new URL(""+new URL("ame02-90858f0b.gif",import.meta.url).href,self.location).href},{file:new URL(""+new URL("ame03-3b494dc5.gif",import.meta.url).href,self.location).href},{file:new URL(""+new URL("ame04-d1976229.gif",import.meta.url).href,self.location).href}],s=w(0),m=w(0),h=()=>{s.value=(s.value+1)%l.length,m.value+=1};V(()=>{setInterval(h,5e3)});const I=W(()=>l[s.value]),c={STOP:0,COUNTING:1,PAUSE:2},C=w(c.STOP);let E=0;const y=()=>{C.value===c.STOP&&o.value.length>0&&A(),t.value.length!==0&&(C.value=c.COUNTING,E=setInterval(()=>{a(),r.value===0&&S()},1e3))},_=()=>{C.value=c.PAUSE,clearInterval(E)},S=()=>{clearInterval(E),C.value=c.STOP;const v=new Audio;if(v.src=f.value,v.play(),i.value){const{show:Q}=Ae({title:"事項完成",body:T.value,icon:"https://github.com/wdaweb.png"});Q()}p(),o.value.length>0&&y()},T=W(()=>t.value.length>0?t.value:o.value.length>0?"點擊開始":"沒有事項"),z=W(()=>{const v=Math.floor(r.value/60).toString().padStart(2,"0"),Q=(r.value%60).toString().padStart(2,"0");return v+":"+Q});return(v,Q)=>(d(),q("div",{style:ee({backgroundImage:"url("+u.value+")",backgroundSize:"100vw 100vh",backgroundRepeat:"no-repeat",backgroundPosition:"center -68px"})},[B($,{class:"vHome"},{default:k(()=>[B(L,{width:240,height:220,"aspect-ratio":"4/3",contain:"",src:oe},{default:k(()=>[B(ne,{class:"text-center py-15"},{default:k(()=>[B(M,{cols:"12",class:"py-0"},{default:k(()=>[b("h1",null,N(T.value),1),b("h1",null,N(z.value),1)]),_:1}),B(M,{cols:"12",class:"py-0"},{default:k(()=>[C.value!==c.COUNTING?(d(),Y(Z,{key:0,variant:"text",icon:"mdi-play",onClick:y})):G("",!0),C.value===c.COUNTING?(d(),Y(Z,{key:1,variant:"text",icon:"mdi-pause",onClick:_})):G("",!0),D(t).length>0?(d(),Y(Z,{key:2,variant:"text",icon:"mdi-skip-next",onClick:S})):G("",!0)]),_:1})]),_:1})]),_:1}),(d(),Y(L,{src:I.value.file,key:m.value,width:240,height:220},null,8,["src"]))]),_:1})],4))}};export{he as default};
