import{q as Q,v as se,x as Ve,y as ke,z as Z,c as C,A as ee,f as n,B as j,C as J,M as we,I as ne,E as le,D as Pe,F as Se,G as Fe,H as Re,J as Be,K as $e,L as Te,N as Le,r as L,O as De,P as Oe,Q as Ae,w as Ee,R as Me,S as Ne,T as Ue,U as M,W as Y,X as We,Y as qe,Z as Ke,_ as ze,$ as je,a0 as Ge,a1 as He,n as de,a2 as Xe,s as Ye,d as $,e as T,h as A,V as Je,i as Qe,a3 as ce,k as d,a4 as fe,u as E,m as ve,t as me,p as z}from"./index-a5527696.js";import{u as Ze}from"./list-24295613.js";import{u as et,V as tt,a as H}from"./settings-dfeb61a6.js";import{V as nt,m as lt,u as be,a as at,b as it,c as he,d as ge}from"./VInput-65469cae.js";class ae{constructor(o){let{x:a,y:i,width:t,height:l}=o;this.x=a,this.y=i,this.width=t,this.height=l}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function ot(e){const o=e.getBoundingClientRect(),a=getComputedStyle(e),i=a.transform;if(i){let t,l,u,v,c;if(i.startsWith("matrix3d("))t=i.slice(9,-1).split(/, /),l=+t[0],u=+t[5],v=+t[12],c=+t[13];else if(i.startsWith("matrix("))t=i.slice(7,-1).split(/, /),l=+t[0],u=+t[3],v=+t[4],c=+t[5];else return new ae(o);const m=a.transformOrigin,y=o.x-v-(1-l)*parseFloat(m),h=o.y-c-(1-u)*parseFloat(m.slice(m.indexOf(" ")+1)),p=l?o.width/l:e.offsetWidth+1,g=u?o.height/u:e.offsetHeight+1;return new ae({x:y,y:h,width:p,height:g})}else return new ae(o)}function st(e,o,a){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(o,a)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(t=>{i.onfinish=()=>{t(i)}})),i}const rt="cubic-bezier(0.4, 0, 0.2, 1)";const ut=Q({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...se(),...Ve({transition:{component:ke}})},"VCounter"),dt=Z()({name:"VCounter",functional:!0,props:ut(),setup(e,o){let{slots:a}=o;const i=C(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ee(()=>n(we,{transition:e.transition},{default:()=>[j(n("div",{class:["v-counter",e.class],style:e.style},[a.default?a.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[J,e.active]])]})),{}}});const ct=Q({floating:Boolean,...se()},"VFieldLabel"),X=Z()({name:"VFieldLabel",props:ct(),setup(e,o){let{slots:a}=o;return ee(()=>n(nt,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},a)),{}}}),ft=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],xe=Q({appendInnerIcon:ne,bgColor:String,clearable:Boolean,clearIcon:{type:ne,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:ne,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>ft.includes(e)},"onClick:clear":le(),"onClick:appendInner":le(),"onClick:prependInner":le(),...se(),...Pe(),...Se(),...Fe()},"VField"),_e=Z()({name:"VField",inheritAttrs:!1,props:{id:String,...lt(),...xe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,o){let{attrs:a,emit:i,slots:t}=o;const{themeClasses:l}=Re(e),{loaderClasses:u}=Be(e),{focusClasses:v,isFocused:c,focus:m,blur:y}=be(e),{InputIcon:h}=at(e),{roundedClasses:p}=$e(e),{rtlClasses:g}=Te(),P=C(()=>e.dirty||e.active),b=C(()=>!e.singleLine&&!!(e.label||t.label)),N=Le(),f=C(()=>e.id||`input-${N}`),x=C(()=>`${f.value}-messages`),B=L(),s=L(),D=L(),r=C(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:k,backgroundColorStyles:w}=De(Oe(e,"bgColor")),{textColorClasses:S,textColorStyles:re}=Ae(C(()=>e.error||e.disabled?void 0:P.value&&c.value?e.color:e.baseColor));Ee(P,I=>{if(b.value){const _=B.value.$el,F=s.value.$el;requestAnimationFrame(()=>{const R=ot(_),V=F.getBoundingClientRect(),W=V.x-R.x,q=V.y-R.y-(R.height/2-V.height/2),O=V.width/.75,K=Math.abs(O-R.width)>1?{maxWidth:Me(O)}:void 0,G=getComputedStyle(_),ue=getComputedStyle(F),Ce=parseFloat(G.transitionDuration)*1e3||150,pe=parseFloat(ue.getPropertyValue("--v-field-label-scale")),Ie=ue.getPropertyValue("color");_.style.visibility="visible",F.style.visibility="hidden",st(_,{transform:`translate(${W}px, ${q}px) scale(${pe})`,color:Ie,...K},{duration:Ce,easing:rt,direction:I?"normal":"reverse"}).finished.then(()=>{_.style.removeProperty("visibility"),F.style.removeProperty("visibility")})})}},{flush:"post"});const U=C(()=>({isActive:P,isFocused:c,controlRef:D,blur:y,focus:m}));function te(I){I.target!==document.activeElement&&I.preventDefault()}return ee(()=>{var W,q,O;const I=e.variant==="outlined",_=t["prepend-inner"]||e.prependInnerIcon,F=!!(e.clearable||t.clear),R=!!(t["append-inner"]||e.appendInnerIcon||F),V=t.label?t.label({...U.value,label:e.label,props:{for:f.value}}):e.label;return n("div",Y({class:["v-field",{"v-field--active":P.value,"v-field--appended":R,"v-field--center-affix":e.centerAffix??!r.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":_,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!V,[`v-field--variant-${e.variant}`]:!0},l.value,k.value,v.value,u.value,p.value,g.value,e.class],style:[w.value,re.value,e.style],onClick:te},a),[n("div",{class:"v-field__overlay"},null),n(Ne,{name:"v-field",active:!!e.loading,color:e.error?"error":e.color},{default:t.loader}),_&&n("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&n(h,{key:"prepend-icon",name:"prependInner"},null),(W=t["prepend-inner"])==null?void 0:W.call(t,U.value)]),n("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&b.value&&n(X,{key:"floating-label",ref:s,class:[S.value],floating:!0,for:f.value},{default:()=>[V]}),n(X,{ref:B,for:f.value},{default:()=>[V]}),(q=t.default)==null?void 0:q.call(t,{...U.value,props:{id:f.value,class:"v-field__input","aria-describedby":x.value},focus:m,blur:y})]),F&&n(Ue,{key:"clear"},{default:()=>[j(n("div",{class:"v-field__clearable",onMousedown:K=>{K.preventDefault(),K.stopPropagation()}},[t.clear?t.clear():n(h,{name:"clear"},null)]),[[J,e.dirty]])]}),R&&n("div",{key:"append",class:"v-field__append-inner"},[(O=t["append-inner"])==null?void 0:O.call(t,U.value),e.appendInnerIcon&&n(h,{key:"append-icon",name:"appendInner"},null)]),n("div",{class:["v-field__outline",S.value]},[I&&n(M,null,[n("div",{class:"v-field__outline__start"},null),b.value&&n("div",{class:"v-field__outline__notch"},[n(X,{ref:s,floating:!0,for:f.value},{default:()=>[V]})]),n("div",{class:"v-field__outline__end"},null)]),r.value&&b.value&&n(X,{ref:s,floating:!0,for:f.value},{default:()=>[V]})])])}),{controlRef:D}}});function vt(e){const o=Object.keys(_e.props).filter(a=>!We(a)&&a!=="class"&&a!=="style");return qe(e,o)}const ie=Symbol("Forwarded refs");function oe(e,o){let a=e;for(;a;){const i=Reflect.getOwnPropertyDescriptor(a,o);if(i)return i;a=Object.getPrototypeOf(a)}}function mt(e){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return e[ie]=a,new Proxy(e,{get(t,l){if(Reflect.has(t,l))return Reflect.get(t,l);if(!(typeof l=="symbol"||l.startsWith("__"))){for(const u of a)if(u.value&&Reflect.has(u.value,l)){const v=Reflect.get(u.value,l);return typeof v=="function"?v.bind(u.value):v}}},has(t,l){if(Reflect.has(t,l))return!0;if(typeof l=="symbol"||l.startsWith("__"))return!1;for(const u of a)if(u.value&&Reflect.has(u.value,l))return!0;return!1},getOwnPropertyDescriptor(t,l){var v;const u=Reflect.getOwnPropertyDescriptor(t,l);if(u)return u;if(!(typeof l=="symbol"||l.startsWith("__"))){for(const c of a){if(!c.value)continue;const m=oe(c.value,l)??("_"in c.value?oe((v=c.value._)==null?void 0:v.setupState,l):void 0);if(m)return m}for(const c of a){const m=c.value&&c.value[ie];if(!m)continue;const y=m.slice();for(;y.length;){const h=y.shift(),p=oe(h.value,l);if(p)return p;const g=h.value&&h.value[ie];g&&y.push(...g)}}}}})}const ht=["color","file","time","date","datetime-local","week","month"],gt=Q({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"},modelModifiers:Object,...it(),...xe()},"VTextField"),ye=Z()({name:"VTextField",directives:{Intersect:Ke},inheritAttrs:!1,props:gt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,o){let{attrs:a,emit:i,slots:t}=o;const l=ze(e,"modelValue"),{isFocused:u,focus:v,blur:c}=be(e),m=C(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value??"").toString().length),y=C(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),h=C(()=>["plain","underlined"].includes(e.variant));function p(r,k){var w,S;!e.autofocus||!r||(S=(w=k[0].target)==null?void 0:w.focus)==null||S.call(w)}const g=L(),P=L(),b=L(),N=C(()=>ht.includes(e.type)||e.persistentPlaceholder||u.value||e.active);function f(){var r;b.value!==document.activeElement&&((r=b.value)==null||r.focus()),u.value||v()}function x(r){i("mousedown:control",r),r.target!==b.value&&(f(),r.preventDefault())}function B(r){f(),i("click:control",r)}function s(r){r.stopPropagation(),f(),de(()=>{l.value=null,Xe(e["onClick:clear"],r)})}function D(r){var w;const k=r.target;if(l.value=k.value,(w=e.modelModifiers)!=null&&w.trim&&["text","search","password","tel","url"].includes(e.type)){const S=[k.selectionStart,k.selectionEnd];de(()=>{k.selectionStart=S[0],k.selectionEnd=S[1]})}}return ee(()=>{const r=!!(t.counter||e.counter||e.counterValue),k=!!(r||t.details),[w,S]=je(a),[{modelValue:re,...U}]=he.filterProps(e),[te]=vt(e);return n(he,Y({ref:g,modelValue:l.value,"onUpdate:modelValue":I=>l.value=I,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-text-field--plain-underlined":["plain","underlined"].includes(e.variant)},e.class],style:e.style},w,U,{centerAffix:!h.value,focused:u.value}),{...t,default:I=>{let{id:_,isDisabled:F,isDirty:R,isReadonly:V,isValid:W}=I;return n(_e,Y({ref:P,onMousedown:x,onClick:B,"onClick:clear":s,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},te,{id:_.value,active:N.value||R.value,dirty:R.value||e.dirty,disabled:F.value,focused:u.value,error:W.value===!1}),{...t,default:q=>{let{props:{class:O,...K}}=q;const G=j(n("input",Y({ref:b,value:l.value,onInput:D,autofocus:e.autofocus,readonly:V.value,disabled:F.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:f,onBlur:c},K,S),null),[[Ge("intersect"),{handler:p},null,{once:!0}]]);return n(M,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),t.default?n("div",{class:O,"data-no-activator":""},[t.default(),G]):He(G,{class:O}),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:k?I=>{var _;return n(M,null,[(_=t.details)==null?void 0:_.call(t,I),r&&n(M,null,[n("span",null,null),n(dt,{active:e.persistentCounter||u.value,value:m.value,max:y.value},t.counter)])])}:void 0})}),mt({},g,P,b)}}),yt=d("h1",null,"事項",-1),bt=d("thead",null,[d("tr",null,[d("th",null,"名稱"),d("th",null,"操作")])],-1),xt={key:0},_t=d("td",{colspan:"2",class:"text-center"},"沒有事項",-1),Ct=[_t],pt=d("h1",null,"已完成事項",-1),It=d("thead",null,[d("tr",null,[d("th",null,"名稱"),d("th",null,"操作")])],-1),Vt={key:0},kt=d("td",{colspan:"2",class:"text-center"},"沒有事項",-1),wt=[kt],Bt={__name:"List",setup(e){const o=et(),a=C(()=>o.selectedBGFile),i=Ze(),{addItem:t,editItem:l,cancelEditItem:u,delItem:v,confirmEditItem:c,delFinishedItem:m}=i,{items:y,finishedItems:h}=Ye(i),p=L(""),g=L(null),P=L([]),b=async()=>{const x=await g.value.validate();console.log(x),!(x.length>0)&&(t(p.value),g.value.blur(),g.value.reset())},N=async(x,B)=>{const s=await P.value[B].validate();console.log(s),!(s.length>0)&&c(x)},f={required:x=>!!x||"欄位必填",length:x=>x.length>=3||"必須三個字以上"};return(x,B)=>($(),T("div",{style:Qe({backgroundImage:"url("+a.value+")",backgroundSize:"100vw 100vh",backgroundRepeat:"no-repeat",backgroundPosition:"center -68px"})},[n(Je,{class:"vListBG"},{default:A(()=>[n(tt,null,{default:A(()=>[n(H,{cols:"12",class:"pushIn"},{default:A(()=>[yt]),_:1}),n(H,{cols:"12",class:"pushIn"},{default:A(()=>[n(ye,{modelValue:p.value,"onUpdate:modelValue":B[0]||(B[0]=s=>p.value=s),label:"新增事項","append-icon":"mdi-plus",onKeydown:ce(b,["enter"]),"onClick:append":b,rules:[f.required,f.length],ref_key:"newItemInput",ref:g},null,8,["modelValue","onKeydown","rules"]),n(ge,null,{default:A(()=>[bt,d("tbody",null,[($(!0),T(M,null,fe(E(y),(s,D)=>($(),T("tr",{key:s.id},[d("td",null,[j(n(ye,{modelValue:s.model,"onUpdate:modelValue":r=>s.model=r,rules:[f.required,f.length],autofocus:"",ref_for:!0,ref_key:"editItemInput",ref:P,onKeydown:ce(r=>N(s.id,D),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","onKeydown"]),[[J,s.edit]]),j(d("span",null,me(s.name),513),[[J,!s.edit]])]),d("td",null,[s.edit?($(),T(M,{key:0},[n(z,{icon:"mdi-check",color:"green",variant:"text",onClick:r=>N(s.id,D)},null,8,["onClick"]),n(z,{icon:"mdi-undo",color:"red",variant:"text",onClick:r=>E(u)(s.id)},null,8,["onClick"])],64)):($(),T(M,{key:1},[n(z,{icon:"mdi-pencil",color:"green",variant:"text",onClick:r=>E(l)(s.id)},null,8,["onClick"]),n(z,{icon:"mdi-delete",color:"red",variant:"text",onClick:r=>E(v)(s.id)},null,8,["onClick"])],64))])]))),128)),E(y).length===0?($(),T("tr",xt,Ct)):ve("",!0)])]),_:1})]),_:1}),n(H,{cols:"12",class:"pushIn"},{default:A(()=>[pt]),_:1}),n(H,{cols:"12",class:"pushIn"},{default:A(()=>[n(ge,null,{default:A(()=>[It,d("tbody",null,[($(!0),T(M,null,fe(E(h),s=>($(),T("tr",{key:s.id},[d("td",null,me(s.name),1),d("td",null,[n(z,{icon:"mdi-delete",color:"red",variant:"text",onClick:D=>E(m)(s.id)},null,8,["onClick"])])]))),128)),E(h).length===0?($(),T("tr",Vt,wt)):ve("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})],4))}};export{Bt as default};
